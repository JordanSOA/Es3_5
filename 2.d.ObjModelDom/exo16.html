<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>JavaScript & DOM : Le Modèle Objet du Document - Exercice 16</title>
    <script>
        //Énoncé :
        /*
        En JavaScript, on a accès à des objets qui contiennent les informations relatives au navigateurs Internet : le DOM. L'objet qui permet d'accéder au DOM est l'objet window. Cet objet est l'objet de plus haut niveau en JavaScript. L'objet window contient des sous objets que nous allons exploiter.
    
        Lorsque le navigateur Internet exécute la méthode correspondant à un évènement, il lui transmet en paramètre un objet d'événement, cet objet d'événement contient des informations relatives à l'évènement qui est survenu. Les objets d'évènements sont documentés ici dans le MDN : https://developer.mozilla.org/fr/docs/Web/API/Event
        */

        /*
        1. Que fait le code ci-dessous ? Au chargement du document, lorsqu'on presse une touche, on récupère le code correspondant à la touche. Selon ce code, on affiche une boite de dialogue. Essayez ce code.
        */

        window.onload = function () {
            var maskDiv = window.document.getElementById('container');
            maskDiv.style.position = "absolute";
            maskDiv.style.overflow = "hidden";
            maskDiv.style.height = "55px";
            maskDiv.style.width = "35px";
            maskDiv.style.left = "15px";
            var imgTag = window.document.getElementById('contenu');
            imgTag.style.position = "absolute";
            imgTag.style.left = "-131px";
            imgTag.style.bottom = "-4435px";



            var frame1 = {
                left :  "-131px",
                bottom : "-4435px"
            };

            var frame2 = {
                left: "-200px",
                bottom: "-4435px"
            };

            var frame3 = {
                left: "-237px",
                bottom: "-4435px"
            };
            var frame4 = {
                left:"-267px",
                bottom: "-4435px"
            };
            var frame7 = {
                left:"-366px",
                bottom: "-4435px"
            };
            var frame9 = {
                left:"-439px",
                bottom: "-4435px"
            };


            var frame1 = {
                left :  "-131px",
                bottom : "-4435px"
            };

            var frame2 = {
                left: "-200px",
                bottom: "-4435px"
            };
            var frame8 = {
                left:"-401px",
                bottom: "-4435px"
            };
            var frame5 = {
                left:"-304px",
                bottom: "-4435px"
            };
            var frame6 = {
                left:"-334px",
                bottom: "-4435px"
            };
            
            var framesArrMarcheDroite = [frame9,frame3, frame7, frame4];

            var cpt = 0;
            
            window.onkeydown = function (event) {
                
            
                var code = event.keyCode;
                
                switch (code) {

                    case 32: 
                        console.log('shoot');
                        break;
                    case 37:
                        //*instructions*
                        maskDiv.style.left =  (parseFloat(maskDiv.style.left) - 4) + "px";
                        maskDiv.style.height = "55px";
                        maskDiv.style.width = "35px";
                        imgTag.style.transform = "scaleX(-1)";
                        if ( cpt  < framesArrMarcheDroite.length - 1 ) {
                            imgTag.style.left = framesArrMarcheDroite[cpt].left;
                            imgTag.style.bottom = framesArrMarcheDroite[cpt].bottom;
                            cpt++;
                            console.log(cpt);
                            console.log(framesArrMarcheDroite[cpt]);
                        } else {
                            cpt = 0;
                            console.log('reset');
                        };
                        console.log('gauche');
                        break;
                    case 38:
                        //instructions
                        maskDiv.style.marginBottom =  "2px";
                        maskDiv.style.height = "86px";
                        maskDiv.style.width = "29px";
                        imgTag.style.left = "-661px";
                        imgTag.style.bottom = "-3904px";
                        console.log('haut');
                        break;
                    case 39:
                        //instructions
                        maskDiv.style.left =  parseFloat(maskDiv.style.left) + 4 + "px";
                        maskDiv.style.height = "55px";
                        maskDiv.style.width = "35px";
                        imgTag.style.transform = "scaleX(1)";
                        if ( cpt  < framesArrMarcheDroite.length - 1 ) {
                            imgTag.style.left = framesArrMarcheDroite[cpt].left;
                            imgTag.style.bottom = framesArrMarcheDroite[cpt].bottom;
                            cpt++;
                            console.log(cpt);
                            console.log(framesArrMarcheDroite[cpt]);
                        } else {
                            cpt = 0;
                            imgTag.style.left = framesArrMarcheDroite[cpt].left;
                            imgTag.style.bottom = framesArrMarcheDroite[cpt].bottom;
                            console.log('reset');
                        };
                        break;
                    case 40:
                        //instructions
                        maskDiv.style.marginTop =  "2px";
                        imgTag.style.marginBottom =  "2px";
                        console.log('bas');
                        break;
                        default: 
                        alert("PRESS ONLY : UP - DOWN - LEFT - RIGHT OR SPACE");
                        break;
                };

            };

        };

        /*
        Ce document comporte une balise img dans une div. La div sert de masque pour le sprite chargé à l'aide de la balise img. Un sprite est une image qui présent les décompositions d'un mouvement.
        */

        /*
          1. Cherchez un sprite sur Google. Chargez le sprite dans le document Web ci-contre. Paramétrez les styles de la div masque pour que une seule décomposition de mouvement du sprite soit visible (utilisez la propriété de style overflow:hidden). La div doit être en position absolute. L'img dans la div doit être en position absolute.
        */
        // window.onload = function () {
        //     var maskDiv = window.document.getElementById('container');
        //     maskDiv.style.position = "absolute";
        //     maskDiv.style.overflow = "hidden";
        //     maskDiv.style.height = "40px";
        //     maskDiv.style.width = "45px";
        //     var imgTag = window.document.getElementById('contenu');
        //     imgTag.style.position = "absolute";
        // };
        /*
          2. En utilisant comme base le code fourni, lorsque je presse une direction, déclenchez du code Javascript (dans la zone avec le sigle *instructions*) qui va déplacer de 2px dans cette direction la div masque.
        */

        /*
          3. En utilisant comme base le code fourni, lorsque je presse la même direction, déclenchez du code Javascript (dans la zone avec le sigle *instructions*) qui va déplacer l'img dans le masque dans la direction opposée au déplacement précédent pour afficher la décomposition suivante du mouvement.
        */

        /*
          4. Reproduire cela pour les directions restantes.
        */

        /*
          5. Trouvez le code numérique qui correspond à la touche "entrée". Dans le cas ou l'utilisateur appuie sur la touche entrée, affichez un "mouvement spécial" de votre sprite (coup d'épée, explosion, etc... ou autre). L'événement contraire de onkeydown est onkeyup. Inspirez vous du code fourni pour faire en sorte que lorsque l'utilisateur relâche la touche entrée, le sprite revienne à son état initial.
        */
    </script>
</head>

<body>
    <h1>Play !</h1>
    <div>
        <div id="container" class="masque">
            <img id="contenu" class="sprite" src="C:\Users\Workspace\Desktop\Exo JS\DoneWork\11226.gif"/>
        </div>
    </div>
    <noscript>
        <p>Veuillez activer JavaScript - Sami Radi - VirtuoWorks® - tous droits réservés©</p>
    </noscript>
</body>

</html>
